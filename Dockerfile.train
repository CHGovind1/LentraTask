FROM python:3.9-slim

# Pre-install core packages (avoid MLflow conflicts)
RUN pip install --no-cache-dir \
    pandas==2.0.3 \
    numpy==1.24.3 \
    scikit-learn==1.3.0 \
    pyyaml==6.0 \
    requests==2.31.0 \
    joblib==1.3.2

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt --only-binary=all
COPY . .
CMD ["python", "train.py"]
